{% extends 'workshop_app/base.html' %}

{% block title %}
    Workshop Statistics
{% endblock %}

{% block content %}
<div class="container-fluid py-5" style=" min-height: 100vh;">
    <div class="row justify-content-center">
        <div class="col-md-3 mb-4">
            <div class="rounded-3 shadow-lg p-3" style="background-color: #374151;">
                <h5 class="text-white mb-3" style="color: #34d399;">
                    <span class="material-icons align-middle me-2" style="font-size: 1.5rem;">groups</span>
                    Teams
                </h5>
                <ul class="nav nav-pills flex-column">
                    {% for team in all_teams %}
                        <li class="nav-item mb-2">
                            <a href="{% url 'statistics_app:team' team.id %}" class="nav-link w-100 px-3 py-2 rounded-2 fw-bold"
                               style="background-color: #059669; color: #fff; transition: background 0.2s;"
                               onmouseover="this.style.backgroundColor='#34d399'"
                               onmouseout="this.style.backgroundColor='#059669'">
                                Team {{ forloop.counter }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <div class="col-md-8">
            <div class="rounded-3 shadow-lg p-4" style="background-color: #374151;">
                <h4 class="mb-4 fw-bold" style="color: #34d399;">
                    <span class="material-icons align-middle me-2" style="font-size: 1.5rem;">bar_chart</span>
                    Team Members Workshops
                </h4>
                <canvas id="myChart" style="background-color: #1f2937; border-radius: 1rem;"></canvas>
            </div>
        </div>
    </div>
</div>
<script>
    var ctx = document.getElementById('myChart').getContext('2d');
    var chart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: {{ team_labels|safe }},
            datasets: [{
                data: {{ ws_count|safe }},
                label: "Team Members Workshops",
                backgroundColor: 'rgba(52, 211, 153, 0.7)',
                borderColor: 'rgba(52, 211, 153, 1)',
                borderWidth: 2,
                borderRadius: 8,
            }]
        },
        options: {
            plugins: {
                legend: {
                    labels: {
                        color: '#fff',
                        font: { size: 16 }
                    }
                }
            },
            scales: {
                x: {
                    ticks: { color: '#fff', font: { size: 14 } },
                    grid: { color: '#374151' }
                },
                y: {
                    ticks: { color: '#fff', font: { size: 14 } },
                    grid: { color: '#374151' }
                }
            }
        }
    });
</script>
{% endblock %}
